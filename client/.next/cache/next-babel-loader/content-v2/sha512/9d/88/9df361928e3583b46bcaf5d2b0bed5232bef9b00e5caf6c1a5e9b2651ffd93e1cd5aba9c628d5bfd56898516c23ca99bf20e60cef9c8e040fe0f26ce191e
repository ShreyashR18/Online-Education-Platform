{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Shreyash/Desktop/temp code/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Shreyash/Desktop/temp code/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/Shreyash/Desktop/temp code/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Shreyash\\\\Desktop\\\\temp code\\\\client\\\\pages\\\\instructor\\\\course\\\\create.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport InstructorRoute from \"../../../components/routes/InstructorRoute\";\nimport CourseCreateForm from \"../../../components/forms/CourseCreateForm\";\nimport Resizer from \"react-image-file-resizer\";\nimport { toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport user from \"../../../../server/models/user\";\n\nvar CourseCreate = function CourseCreate() {\n  _s();\n\n  // state\n  var _useState = useState({\n    name: \"\",\n    description: \"\",\n    price: \"9.99\",\n    uploading: false,\n    paid: true,\n    category: \"\",\n    loading: false\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var _useState2 = useState({}),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      preview = _useState3[0],\n      setPreview = _useState3[1];\n\n  var _useState4 = useState(\"Upload Image\"),\n      uploadButtonText = _useState4[0],\n      setUploadButtonText = _useState4[1]; // router\n\n\n  var router = useRouter();\n\n  var handleChange = function handleChange(e) {\n    setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleImage = function handleImage(e) {\n    var file = e.target.files[0];\n    setPreview(window.URL.createObjectURL(file));\n    setUploadButtonText(file.name);\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    })); // resize\n\n    Resizer.imageFileResizer(file, 720, 500, \"JPEG\", 100, 0, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(uri) {\n        var _yield$axios$post, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.post(\"/api/course/upload-image\", {\n                  image: uri\n                });\n\n              case 3:\n                _yield$axios$post = _context.sent;\n                data = _yield$axios$post.data;\n                console.log(\"IMAGE UPLOADED\", data); // set image in the state\n\n                setImage(data);\n                setValues(_objectSpread(_objectSpread({}, values), {}, {\n                  loading: false\n                }));\n                _context.next = 15;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n                setValues(_objectSpread(_objectSpread({}, values), {}, {\n                  loading: false\n                }));\n                toast(\"Image upload failed. Try later.\");\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n\n  var handleImageRemove = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              // console.log(values);\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: true\n              }));\n              _context2.next = 4;\n              return axios.post(\"/api/course/remove-image\", {\n                image: image\n              });\n\n            case 4:\n              res = _context2.sent;\n              setImage({});\n              setPreview(\"\");\n              setUploadButtonText(\"Upload Image\");\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: false\n              }));\n              _context2.next = 16;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n              setValues(_objectSpread(_objectSpread({}, values), {}, {\n                loading: false\n              }));\n              toast(\"Image upload failed. Try later.\");\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 11]]);\n    }));\n\n    return function handleImageRemove() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var _yield$axios$post2, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              _context3.prev = 1;\n              _context3.next = 4;\n              return axios.post(\"/api/course\", _objectSpread(_objectSpread({}, values), {}, {\n                image: image\n              }));\n\n            case 4:\n              _yield$axios$post2 = _context3.sent;\n              data = _yield$axios$post2.data;\n              toast(\"Great! Now you can start adding lessons\");\n              router.push(\"/instructor\");\n              _context3.next = 13;\n              break;\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n              toast(_context3.t0.response.data);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 10]]);\n    }));\n\n    return function handleSubmit(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(InstructorRoute, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"jumbotron text-center square\",\n      children: \"Create Course\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-3 pb-3\",\n      children: /*#__PURE__*/_jsxDEV(CourseCreateForm, {\n        handleSubmit: handleSubmit,\n        handleImage: handleImage,\n        handleChange: handleChange,\n        values: values,\n        setValues: setValues,\n        preview: preview,\n        uploadButtonText: uploadButtonText,\n        handleImageRemove: handleImageRemove\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(values, null, 4)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(image, null, 4)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CourseCreate, \"Qu4mGPeD0PIPeEHx23OBCJEHo3g=\", false, function () {\n  return [useRouter];\n});\n\n_c = CourseCreate;\nexport default CourseCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"CourseCreate\");","map":{"version":3,"sources":["C:/Users/Shreyash/Desktop/temp code/client/pages/instructor/course/create.js"],"names":["useState","axios","InstructorRoute","CourseCreateForm","Resizer","toast","useRouter","user","CourseCreate","name","description","price","uploading","paid","category","loading","values","setValues","image","setImage","preview","setPreview","uploadButtonText","setUploadButtonText","router","handleChange","e","target","value","handleImage","file","files","window","URL","createObjectURL","imageFileResizer","uri","post","data","console","log","handleImageRemove","res","handleSubmit","preventDefault","push","response","JSON","stringify"],"mappings":";;;;;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,4CAA5B;AACA,OAAOC,gBAAP,MAA6B,4CAA7B;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,IAAP,MAAiB,gCAAjB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA;;AACzB;AADyB,kBAEGR,QAAQ,CAAC;AACnCS,IAAAA,IAAI,EAAE,EAD6B;AAEnCC,IAAAA,WAAW,EAAE,EAFsB;AAGnCC,IAAAA,KAAK,EAAE,MAH4B;AAInCC,IAAAA,SAAS,EAAE,KAJwB;AAKnCC,IAAAA,IAAI,EAAE,IAL6B;AAMnCC,IAAAA,QAAQ,EAAE,EANyB;AAOnCC,IAAAA,OAAO,EAAE;AAP0B,GAAD,CAFX;AAAA,MAElBC,MAFkB;AAAA,MAEVC,SAFU;;AAAA,mBAWCjB,QAAQ,CAAC,EAAD,CAXT;AAAA,MAWlBkB,KAXkB;AAAA,MAWXC,QAXW;;AAAA,mBAYKnB,QAAQ,CAAC,EAAD,CAZb;AAAA,MAYlBoB,OAZkB;AAAA,MAYTC,UAZS;;AAAA,mBAauBrB,QAAQ,CAAC,cAAD,CAb/B;AAAA,MAalBsB,gBAbkB;AAAA,MAaAC,mBAbA,kBAezB;;;AACA,MAAMC,MAAM,GAAGlB,SAAS,EAAxB;;AAEA,MAAMmB,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;AAC1BT,IAAAA,SAAS,iCAAMD,MAAN,2BAAeU,CAAC,CAACC,MAAF,CAASlB,IAAxB,EAA+BiB,CAAC,CAACC,MAAF,CAASC,KAAxC,GAAT;AACD,GAFD;;AAIA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACH,CAAD,EAAO;AACzB,QAAII,IAAI,GAAGJ,CAAC,CAACC,MAAF,CAASI,KAAT,CAAe,CAAf,CAAX;AACAV,IAAAA,UAAU,CAACW,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BJ,IAA3B,CAAD,CAAV;AACAP,IAAAA,mBAAmB,CAACO,IAAI,CAACrB,IAAN,CAAnB;AACAQ,IAAAA,SAAS,iCAAMD,MAAN;AAAcD,MAAAA,OAAO,EAAE;AAAvB,OAAT,CAJyB,CAKzB;;AACAX,IAAAA,OAAO,CAAC+B,gBAAR,CAAyBL,IAAzB,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,MAAzC,EAAiD,GAAjD,EAAsD,CAAtD;AAAA,0EAAyD,iBAAOM,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEhCnC,KAAK,CAACoC,IAAN,CAAW,0BAAX,EAAuC;AAC1DnB,kBAAAA,KAAK,EAAEkB;AADmD,iBAAvC,CAFgC;;AAAA;AAAA;AAE/CE,gBAAAA,IAF+C,qBAE/CA,IAF+C;AAKrDC,gBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,IAA9B,EALqD,CAMrD;;AACAnB,gBAAAA,QAAQ,CAACmB,IAAD,CAAR;AACArB,gBAAAA,SAAS,iCAAMD,MAAN;AAAcD,kBAAAA,OAAO,EAAE;AAAvB,mBAAT;AARqD;AAAA;;AAAA;AAAA;AAAA;AAUrDwB,gBAAAA,OAAO,CAACC,GAAR;AACAvB,gBAAAA,SAAS,iCAAMD,MAAN;AAAcD,kBAAAA,OAAO,EAAE;AAAvB,mBAAT;AACAV,gBAAAA,KAAK,CAAC,iCAAD,CAAL;;AAZqD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAzD;;AAAA;AAAA;AAAA;AAAA;AAeD,GArBD;;AAuBA,MAAMoC,iBAAiB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtB;AACAxB,cAAAA,SAAS,iCAAMD,MAAN;AAAcD,gBAAAA,OAAO,EAAE;AAAvB,iBAAT;AAHsB;AAAA,qBAIJd,KAAK,CAACoC,IAAN,CAAW,0BAAX,EAAuC;AAAEnB,gBAAAA,KAAK,EAALA;AAAF,eAAvC,CAJI;;AAAA;AAIhBwB,cAAAA,GAJgB;AAKtBvB,cAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,cAAAA,UAAU,CAAC,EAAD,CAAV;AACAE,cAAAA,mBAAmB,CAAC,cAAD,CAAnB;AACAN,cAAAA,SAAS,iCAAMD,MAAN;AAAcD,gBAAAA,OAAO,EAAE;AAAvB,iBAAT;AARsB;AAAA;;AAAA;AAAA;AAAA;AAUtBwB,cAAAA,OAAO,CAACC,GAAR;AACAvB,cAAAA,SAAS,iCAAMD,MAAN;AAAcD,gBAAAA,OAAO,EAAE;AAAvB,iBAAT;AACAV,cAAAA,KAAK,CAAC,iCAAD,CAAL;;AAZsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBoC,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAgBA,MAAME,YAAY;AAAA,yEAAG,kBAAOjB,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACkB,cAAF;AADmB;AAAA;AAAA,qBAIM3C,KAAK,CAACoC,IAAN,CAAW,aAAX,kCAClBrB,MADkB;AAErBE,gBAAAA,KAAK,EAALA;AAFqB,iBAJN;;AAAA;AAAA;AAIToB,cAAAA,IAJS,sBAITA,IAJS;AAQjBjC,cAAAA,KAAK,CAAC,yCAAD,CAAL;AACAmB,cAAAA,MAAM,CAACqB,IAAP,CAAY,aAAZ;AATiB;AAAA;;AAAA;AAAA;AAAA;AAWjBxC,cAAAA,KAAK,CAAC,aAAIyC,QAAJ,CAAaR,IAAd,CAAL;;AAXiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZK,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAeA,sBACE,QAAC,eAAD;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,8BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,6BACE,QAAC,gBAAD;AACE,QAAA,YAAY,EAAEA,YADhB;AAEE,QAAA,WAAW,EAAEd,WAFf;AAGE,QAAA,YAAY,EAAEJ,YAHhB;AAIE,QAAA,MAAM,EAAET,MAJV;AAKE,QAAA,SAAS,EAAEC,SALb;AAME,QAAA,OAAO,EAAEG,OANX;AAOE,QAAA,gBAAgB,EAAEE,gBAPpB;AAQE,QAAA,iBAAiB,EAAEmB;AARrB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aAFF,eAcE;AAAA,gBAAMM,IAAI,CAACC,SAAL,CAAehC,MAAf,EAAuB,IAAvB,EAA6B,CAA7B;AAAN;AAAA;AAAA;AAAA;AAAA,aAdF,eAeE;AAAA;AAAA;AAAA;AAAA,aAfF,eAgBE;AAAA,gBAAM+B,IAAI,CAACC,SAAL,CAAe9B,KAAf,EAAsB,IAAtB,EAA4B,CAA5B;AAAN;AAAA;AAAA;AAAA;AAAA,aAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAoBD,CAhGD;;GAAMV,Y;UAgBWF,S;;;KAhBXE,Y;AAkGN,eAAeA,YAAf","sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\nimport InstructorRoute from \"../../../components/routes/InstructorRoute\";\nimport CourseCreateForm from \"../../../components/forms/CourseCreateForm\";\nimport Resizer from \"react-image-file-resizer\";\nimport { toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport user from \"../../../../server/models/user\";\n\nconst CourseCreate = () => {\n  // state\n  const [values, setValues] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"9.99\",\n    uploading: false,\n    paid: true,\n    category: \"\",\n    loading: false,\n  });\n  const [image, setImage] = useState({});\n  const [preview, setPreview] = useState(\"\");\n  const [uploadButtonText, setUploadButtonText] = useState(\"Upload Image\");\n\n  // router\n  const router = useRouter();\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  const handleImage = (e) => {\n    let file = e.target.files[0];\n    setPreview(window.URL.createObjectURL(file));\n    setUploadButtonText(file.name);\n    setValues({ ...values, loading: true });\n    // resize\n    Resizer.imageFileResizer(file, 720, 500, \"JPEG\", 100, 0, async (uri) => {\n      try {\n        let { data } = await axios.post(\"/api/course/upload-image\", {\n          image: uri,\n        });\n        console.log(\"IMAGE UPLOADED\", data);\n        // set image in the state\n        setImage(data);\n        setValues({ ...values, loading: false });\n      } catch (err) {\n        console.log(err);\n        setValues({ ...values, loading: false });\n        toast(\"Image upload failed. Try later.\");\n      }\n    });\n  };\n\n  const handleImageRemove = async () => {\n    try {\n      // console.log(values);\n      setValues({ ...values, loading: true });\n      const res = await axios.post(\"/api/course/remove-image\", { image });\n      setImage({});\n      setPreview(\"\");\n      setUploadButtonText(\"Upload Image\");\n      setValues({ ...values, loading: false });\n    } catch (err) {\n      console.log(err);\n      setValues({ ...values, loading: false });\n      toast(\"Image upload failed. Try later.\");\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      // console.log(values);\n      const { data } = await axios.post(\"/api/course\", {\n        ...values,\n        image,\n      });\n      toast(\"Great! Now you can start adding lessons\");\n      router.push(\"/instructor\");\n    } catch (err) {\n      toast(err.response.data);\n    }\n  };\n\n  return (\n    <InstructorRoute>\n      <h1 className=\"jumbotron text-center square\">Create Course</h1>\n      <div className=\"pt-3 pb-3\">\n        <CourseCreateForm\n          handleSubmit={handleSubmit}\n          handleImage={handleImage}\n          handleChange={handleChange}\n          values={values}\n          setValues={setValues}\n          preview={preview}\n          uploadButtonText={uploadButtonText}\n          handleImageRemove={handleImageRemove}\n        />\n      </div>\n      <pre>{JSON.stringify(values, null, 4)}</pre>\n      <hr />\n      <pre>{JSON.stringify(image, null, 4)}</pre>\n    </InstructorRoute>\n  );\n};\n\nexport default CourseCreate;\n"]},"metadata":{},"sourceType":"module"}